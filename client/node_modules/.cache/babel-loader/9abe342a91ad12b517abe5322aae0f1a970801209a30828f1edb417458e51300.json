{"ast":null,"code":"import _defineProperty from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";import{updateProfileUser}from\"../../redux/actions/profileAction\";import{checkImage}from\"../../utils/imageUpload\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(_ref){var setOnEdit=_ref.setOnEdit;var initialState={fullname:\"\",mobile:\"\",address:\"\",website:\"\",story:\"\",gender:\"\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var fullname=userData.fullname,mobile=userData.mobile,address=userData.address,website=userData.website,story=userData.story,gender=userData.gender;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],SetAvatar=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();useEffect(function(){setUserData(auth.user);},[auth.user]);var changeAvatar=function changeAvatar(e){var file=e.target.files[0];var err=checkImage(file);if(err){return dispatch({type:GLOBALTYPES.ALERT,payload:{error:err}});}SetAvatar(file);};var handleInput=function handleInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(updateProfileUser({userData:userData,avatar:avatar,auth:auth}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"edit_profile\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn_close\",onClick:function onClick(){return setOnEdit(false);},children:\"Close\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info_avatar\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"profile\",src:avatar?URL.createObjectURL(avatar):auth.user.avatar,style:{filter:theme?\"invert(1)\":\"invert(0)\"}}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-camera\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Change\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",id:\"file_up\",accept:\"image/*\",onChange:changeAvatar})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullname\",children:\"Full Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"fullname\",name:\"fullname\",value:fullname,onChange:handleInput}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger position-absolute\",style:{top:\"50%\",right:\"5px\",transform:\"translateY(-50%)\"},children:[fullname.length,\"/25\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mobile\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"mobile\",name:\"mobile\",value:mobile,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"address\",name:\"address\",value:address,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"website\",children:\"Website\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"website\",name:\"website\",value:website,onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"story\",children:\"Story\"}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"4\",type:\"text\",className:\"form-control\",id:\"story\",name:\"story\",value:story,onChange:handleInput}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger d-block text-right\",children:[story.length,\"/200\"]})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gender\",children:\"Gender\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend px-0 mb-4\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"custom-select text-capitalize\",name:\"gender\",id:\"gender\",onChange:handleInput,value:gender,children:[/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info w-100\",type:\"submit\",children:\"Save\"})]})]});};export default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","GLOBALTYPES","updateProfileUser","checkImage","jsx","_jsx","jsxs","_jsxs","EditProfile","_ref","setOnEdit","initialState","fullname","mobile","address","website","story","gender","_useState","_useState2","_slicedToArray","userData","setUserData","_useState3","_useState4","avatar","SetAvatar","_useSelector","state","auth","theme","dispatch","user","changeAvatar","e","file","target","files","err","type","ALERT","payload","error","handleInput","_e$target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","className","children","onClick","onSubmit","alt","src","URL","createObjectURL","style","filter","id","accept","onChange","htmlFor","top","right","transform","length","cols","rows"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/profile/EditProfile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\nimport { updateProfileUser } from \"../../redux/actions/profileAction\";\n\nimport { checkImage } from \"../../utils/imageUpload\";\n\nconst EditProfile = ({ setOnEdit }) => {\n  const initialState = {\n    fullname: \"\",\n    mobile: \"\",\n    address: \"\",\n    website: \"\",\n    story: \"\",\n    gender: \"\",\n  };\n  const [userData, setUserData] = useState(initialState);\n  const { fullname, mobile, address, website, story, gender } = userData;\n  const [avatar, SetAvatar] = useState(\"\");\n  const { auth, theme } = useSelector((state) => state);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setUserData(auth.user);\n  }, [auth.user]);\n\n  const changeAvatar = (e) => {\n    const file = e.target.files[0];\n    const err = checkImage(file);\n    if (err) {\n      return dispatch({ type: GLOBALTYPES.ALERT, payload: { error: err } });\n    }\n    SetAvatar(file);\n  };\n\n  const handleInput = (e) => {\n    const { name, value } = e.target;\n    setUserData({ ...userData, [name]: value });\n  };\n\n  const handleSubmit = e => {\n      e.preventDefault();\n      dispatch(updateProfileUser( {userData, avatar, auth} ) );\n  };\n\n  return (\n    <div className=\"edit_profile\">\n      <button\n        className=\"btn btn-danger btn_close\"\n        onClick={() => setOnEdit(false)}\n      >\n        Close\n      </button>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"info_avatar\">\n          <img\n            alt=\"profile\"\n            src={avatar ? URL.createObjectURL(avatar) : auth.user.avatar}\n            style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\n          />\n          <span>\n            <i className=\"fas fa-camera\" />\n            <p>Change</p>\n            <input\n              type=\"file\"\n              name=\"file\"\n              id=\"file_up\"\n              accept=\"image/*\"\n              onChange={changeAvatar}\n            />\n          </span>\n        </div>\n\n        <div className=\"form_group\">\n          <label htmlFor=\"fullname\">Full Name</label>\n          <div className=\"position-relative\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"fullname\"\n              name=\"fullname\"\n              value={fullname}\n              onChange={handleInput}\n            />\n            <small\n              className=\"text-danger position-absolute\"\n              style={{\n                top: \"50%\",\n                right: \"5px\",\n                transform: \"translateY(-50%)\",\n              }}\n            >\n              {fullname.length}/25\n            </small>\n          </div>\n        </div>\n\n        <div className=\"form_group\">\n          <label htmlFor=\"mobile\">Mobile</label>\n\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"mobile\"\n            name=\"mobile\"\n            value={mobile}\n            onChange={handleInput}\n          />\n        </div>\n\n        <div className=\"form_group\">\n          <label htmlFor=\"address\">Address</label>\n\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"address\"\n            name=\"address\"\n            value={address}\n            onChange={handleInput}\n          />\n        </div>\n\n        <div className=\"form_group\">\n          <label htmlFor=\"website\">Website</label>\n\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"website\"\n            name=\"website\"\n            value={website}\n            onChange={handleInput}\n          />\n        </div>\n\n        <div className=\"form_group\">\n          <label htmlFor=\"story\">Story</label>\n\n          <textarea\n            cols=\"30\"\n            rows=\"4\"\n            type=\"text\"\n            className=\"form-control\"\n            id=\"story\"\n            name=\"story\"\n            value={story}\n            onChange={handleInput}\n          />\n\n          <small className=\"text-danger d-block text-right\">\n            {story.length}/200\n          </small>\n        </div>\n\n        <label htmlFor=\"gender\">Gender</label>\n        <div className=\"input-group-prepend px-0 mb-4\">\n          <select\n            className=\"custom-select text-capitalize\"\n            name=\"gender\"\n            id=\"gender\"\n            onChange={handleInput}\n            value={gender}\n          >\n            <option value=\"male\">Male</option>\n            <option value=\"female\">Female</option>\n          </select>\n        </div>\n        <button className=\"btn btn-info w-100\" type=\"submit\">\n          Save\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}