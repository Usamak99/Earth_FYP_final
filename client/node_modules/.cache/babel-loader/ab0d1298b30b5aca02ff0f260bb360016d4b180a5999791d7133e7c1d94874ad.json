{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import PostCard from\"../PostCard\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{POST_TYPES}from\"../../redux/actions/postAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(){var _useSelector=useSelector(function(state){return state;}),homePosts=_useSelector.homePosts,auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var handleLoadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"posts?limit=\".concat(homePosts.page*9),auth.token);case 3:res=_context.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:homePosts.page+1})});setLoad(false);case 6:case\"end\":return _context.stop();}},_callee);}));return function handleLoadMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[homePosts.posts.map(function(post){return/*#__PURE__*/_jsx(PostCard,{post:post,theme:theme},post._id);}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:homePosts.result,page:homePosts.page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","PostCard","LoadIcon","LoadMoreBtn","getDataAPI","POST_TYPES","jsx","_jsx","jsxs","_jsxs","Posts","_useSelector","state","homePosts","auth","theme","dispatch","_useState","_useState2","_slicedToArray","load","setLoad","handleLoadMore","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","concat","page","token","sent","type","GET_POSTS","payload","_objectSpread","data","stop","apply","arguments","className","children","posts","map","post","_id","src","alt","result"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/home/Posts.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport PostCard from \"../PostCard\";\nimport LoadIcon from \"../../images/loading.gif\";\nimport LoadMoreBtn from \"../LoadMoreBtn\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { POST_TYPES } from \"../../redux/actions/postAction\";\n\nconst Posts = () => {\n  const { homePosts, auth, theme } = useSelector((state) => state);\n  const dispatch =  useDispatch();\n\n  const [load, setLoad] = useState(false);\n\n  const handleLoadMore = async () => {\n    setLoad(true);\n    const res = await getDataAPI(`posts?limit=${homePosts.page * 9}`, auth.token);\n    dispatch({ type: POST_TYPES.GET_POSTS, payload: {...res.data, page: homePosts.page + 1 } });\n    setLoad(false);\n  };\n  return (\n    <div className=\"posts\">\n      {homePosts.posts.map((post) => (\n        <PostCard key={post._id} post={post} theme={theme} />\n      ))}\n\n      {load && (\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\n      )}\n\n      <LoadMoreBtn\n        result={homePosts.result}\n        page={homePosts.page}\n        load={load}\n        handleLoadMore={handleLoadMore}\n      />\n    </div>\n  );\n};\n\nexport default Posts;\n"],"mappings":"mnBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,QAAQ,KAAM,aAAa,CAClC,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,WAAW,KAAM,gBAAgB,CACxC,OAASC,UAAU,KAAQ,uBAAuB,CAClD,OAASC,UAAU,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5D,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClB,IAAAC,YAAA,CAAmCZ,WAAW,CAAC,SAACa,KAAK,QAAK,CAAAA,KAAK,GAAC,CAAxDC,SAAS,CAAAF,YAAA,CAATE,SAAS,CAAEC,IAAI,CAAAH,YAAA,CAAJG,IAAI,CAAEC,KAAK,CAAAJ,YAAA,CAALI,KAAK,CAC9B,GAAM,CAAAC,QAAQ,CAAIhB,WAAW,EAAE,CAE/B,IAAAiB,SAAA,CAAwBnB,QAAQ,CAAC,KAAK,CAAC,CAAAoB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAEpB,GAAM,CAAAI,cAAc,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACrBZ,OAAO,CAAC,IAAI,CAAC,CAACU,QAAA,CAAAE,IAAA,SACI,CAAA7B,UAAU,gBAAA8B,MAAA,CAAgBrB,SAAS,CAACsB,IAAI,CAAG,CAAC,EAAIrB,IAAI,CAACsB,KAAK,CAAC,QAAvER,GAAG,CAAAG,QAAA,CAAAM,IAAA,CACTrB,QAAQ,CAAC,CAAEsB,IAAI,CAAEjC,UAAU,CAACkC,SAAS,CAAEC,OAAO,CAAAC,aAAA,CAAAA,aAAA,IAAMb,GAAG,CAACc,IAAI,MAAEP,IAAI,CAAEtB,SAAS,CAACsB,IAAI,CAAG,CAAC,EAAG,CAAC,CAAC,CAC3Fd,OAAO,CAAC,KAAK,CAAC,CAAC,wBAAAU,QAAA,CAAAY,IAAA,MAAAhB,OAAA,GAChB,kBALK,CAAAL,cAAcA,CAAA,SAAAC,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAKnB,CACD,mBACEpC,KAAA,QAAKqC,SAAS,CAAC,OAAO,CAAAC,QAAA,EACnBlC,SAAS,CAACmC,KAAK,CAACC,GAAG,CAAC,SAACC,IAAI,qBACxB3C,IAAA,CAACN,QAAQ,EAAgBiD,IAAI,CAAEA,IAAK,CAACnC,KAAK,CAAEA,KAAM,EAAnCmC,IAAI,CAACC,GAAG,CAA8B,EACtD,CAAC,CAED/B,IAAI,eACHb,IAAA,QAAK6C,GAAG,CAAElD,QAAS,CAACmD,GAAG,CAAC,YAAY,CAACP,SAAS,CAAC,iBAAiB,EACjE,cAEDvC,IAAA,CAACJ,WAAW,EACVmD,MAAM,CAAEzC,SAAS,CAACyC,MAAO,CACzBnB,IAAI,CAAEtB,SAAS,CAACsB,IAAK,CACrBf,IAAI,CAAEA,IAAK,CACXE,cAAc,CAAEA,cAAe,EAC/B,GACE,CAEV,CAAC,CAED,cAAe,CAAAZ,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}