{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Avatar from\"./Avatar\";import moment from'moment';import{deleteAllNotifies,isReadNotify,NOTIFY_TYPES}from'../redux/actions/notifyAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotifyModal=function NotifyModal(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,notify=_useSelector.notify;var dispatch=useDispatch();var handleIsRead=function handleIsRead(msg){dispatch(isReadNotify({msg:msg,auth:auth}));};var handleDeleteAll=function handleDeleteAll(){var newArr=notify.data.filter(function(item){return item.isRead===false;});if(newArr.length===0)return dispatch(deleteAllNotifies(auth.token));if(window.confirm(\"You have \".concat(newArr.length,\" unread notifications.Do you want to delete all notifications?\"))){return dispatch(deleteAllNotifies(auth.token));}};var handleSound=function handleSound(){dispatch({type:NOTIFY_TYPES.UPDATE_SOUND,payload:!notify.sound});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",style:{minWidth:\"280px\",boxShadow:\"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",background:\"white\",borderRadius:\"10px\",borderTopRightRadius:\"0\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notifications\"}),notify.sound?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell-slash text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-1\"}),notify.data.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-muted w-100 text-center\",children:\"No Notifications\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"calc(100vh - 200px)\",overflow:\"auto\"},children:notify.data.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 mb-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"\".concat(msg.url),style:{textDecoration:\"none\"},className:\"d-flex text-dark align-items-center\",onClick:function onClick(){return handleIsRead(msg);},children:[/*#__PURE__*/_jsx(Avatar,{src:msg.user.avatar,size:\"big-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-fill mx-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"mr-1\",children:msg.user.username}),/*#__PURE__*/_jsx(\"span\",{children:msg.text})]}),msg.content&&/*#__PURE__*/_jsxs(\"small\",{children:[msg.content.slice(0,20),\"...\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"30px\"},children:msg.image&&/*#__PURE__*/_jsx(Avatar,{src:msg.image,size:\"medium-avatar\"})})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-flex justify-content-between px-2\",children:[moment(msg.createdAt).fromNow(),!msg.isRead&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle color-c1\"})]})]},index);})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end my-auto me-2 color-c1\",style:{cursor:\"pointer\"},onClick:handleDeleteAll,children:\"Delete\"})]});};export default NotifyModal;","map":{"version":3,"names":["React","useDispatch","useSelector","Link","Avatar","moment","deleteAllNotifies","isReadNotify","NOTIFY_TYPES","jsx","_jsx","jsxs","_jsxs","NotifyModal","_useSelector","state","auth","notify","dispatch","handleIsRead","msg","handleDeleteAll","newArr","data","filter","item","isRead","length","token","window","confirm","concat","handleSound","type","UPDATE_SOUND","payload","sound","className","style","minWidth","boxShadow","background","borderRadius","borderTopRightRadius","children","fontSize","cursor","onClick","maxHeight","overflow","map","index","to","url","textDecoration","src","user","avatar","size","username","text","content","slice","width","image","createdAt","fromNow"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/NotifyModal.js"],"sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"./Avatar\";\r\nimport moment from 'moment';\r\nimport { deleteAllNotifies, isReadNotify, NOTIFY_TYPES } from '../redux/actions/notifyAction';\r\n\r\nconst NotifyModal = () => {\r\n    const { auth, notify } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleIsRead = (msg) => {\r\n      dispatch(isReadNotify({msg, auth}));\r\n    };\r\n\r\n    const handleDeleteAll = () => {\r\n      const newArr = notify.data.filter(item => item.isRead === false)\r\n      if(newArr.length === 0) return dispatch(deleteAllNotifies(auth.token))\r\n\r\n      if(window.confirm(`You have ${newArr.length} unread notifications.Do you want to delete all notifications?`)){\r\n        return dispatch(deleteAllNotifies(auth.token))\r\n      }\r\n    };\r\n\r\n    const handleSound = () => {\r\n      dispatch({type: NOTIFY_TYPES.UPDATE_SOUND, payload: !notify.sound });\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className=\"mt-1\"\r\n        style={{\r\n          minWidth: \"280px\",\r\n          boxShadow: \"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",\r\n          background: \"white\",\r\n          borderRadius: \"10px\",\r\n          borderTopRightRadius: \"0\",\r\n        }}\r\n      >\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h3>Notifications</h3>\r\n          {notify.sound ? (\r\n            <i\r\n              className=\"fas fa-bell text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          ) : (\r\n            <i\r\n              className=\"fas fa-bell-slash text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          )}\r\n        </div>\r\n        <hr className=\"mt-1\" />\r\n        {notify.data.length === 0 && (\r\n          <span className=\"text-muted w-100 text-center\">No Notifications</span>\r\n        )}\r\n        <div style={{ maxHeight: \"calc(100vh - 200px)\", overflow: \"auto\" }}>\r\n          {notify.data.map((msg, index) => (\r\n            <div className=\"px-2 mb-3\" key={index}>\r\n              <Link\r\n                to={`${msg.url}`}\r\n                style={{ textDecoration: \"none\" }}\r\n                className=\"d-flex text-dark align-items-center\"\r\n                onClick={() => handleIsRead(msg)}\r\n              >\r\n                <Avatar src={msg.user.avatar} size=\"big-avatar\" />\r\n\r\n                <div className=\"flex-fill mx-1\">\r\n                  <div>\r\n                    <strong className=\"mr-1\">{msg.user.username}</strong>\r\n                    <span>{msg.text}</span>\r\n                  </div>\r\n                  {msg.content && <small>{msg.content.slice(0, 20)}...</small>}\r\n                </div>\r\n                <div style={{ width: \"30px\" }}>\r\n                  {msg.image && <Avatar src={msg.image} size=\"medium-avatar\" />}\r\n                </div>\r\n              </Link>\r\n              <small className=\"text-muted d-flex justify-content-between px-2\">\r\n                {moment(msg.createdAt).fromNow()}\r\n                {!msg.isRead && <i className=\"fas fa-circle color-c1\" />}\r\n              </small>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <hr className=\"my-1\" />\r\n        <div\r\n          className=\"text-end my-auto me-2 color-c1\"\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={handleDeleteAll}\r\n        >\r\n          Delete\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default NotifyModal\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}