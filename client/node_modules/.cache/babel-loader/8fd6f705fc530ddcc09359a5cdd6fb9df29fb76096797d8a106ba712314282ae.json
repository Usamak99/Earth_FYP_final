{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import PostThumb from\"../PostThumb\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{PROFILE_TYPES}from\"../../redux/actions/profileAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(_ref){var auth=_ref.auth,profile=_ref.profile,dispatch=_ref.dispatch,id=_ref.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){profile.posts.forEach(function(data){if(data._id===id){setPosts(data.posts);setResult(data.result);setPage(data.page);}});},[profile.posts,id]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,newData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"user_posts/\".concat(id,\"?limit=\").concat(page*9),auth.token);case 3:res=_context.sent;newData=_objectSpread(_objectSpread({},res.data),{},{page:page+1,_id:id});dispatch({type:PROFILE_TYPES.UPDATE_POST,payload:newData});setLoad(false);case 7:case\"end\":return _context.stop();}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:posts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","PROFILE_TYPES","jsx","_jsx","jsxs","_jsxs","Posts","_ref","auth","profile","dispatch","id","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","result","setResult","_useState5","_useState6","page","setPage","_useState7","_useState8","load","setLoad","forEach","data","_id","handleLoadMore","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","newData","wrap","_callee$","_context","prev","next","concat","token","sent","_objectSpread","type","UPDATE_POST","payload","stop","apply","arguments","children","src","alt","className"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/profile/Posts.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PostThumb from \"../PostThumb\";\nimport LoadIcon from \"../../images/loading.gif\";\nimport LoadMoreBtn from \"../LoadMoreBtn\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { PROFILE_TYPES } from \"../../redux/actions/profileAction\";\n\nconst Posts = ({ auth, profile, dispatch, id }) => {\n  const [posts, setPosts] = useState([]);\n  const [result, setResult] = useState(9);\n  const [page, setPage] = useState(0);\n  const [load, setLoad] = useState(false);\n\n  useEffect(() => {\n    profile.posts.forEach((data) => {\n      if (data._id === id) {\n        setPosts(data.posts);\n        setResult(data.result);\n        setPage(data.page);\n      }\n    });\n  }, [profile.posts, id]);\n\n  const handleLoadMore = async () => {\n    setLoad(true);\n    const res = await getDataAPI(\n      `user_posts/${id}?limit=${page * 9}`,\n      auth.token\n    );\n    const newData = { ...res.data, page: page + 1, _id: id };\n    dispatch({ type: PROFILE_TYPES.UPDATE_POST, payload: newData });\n    setLoad(false);\n  };\n  return (\n    <div>\n      <PostThumb posts={posts} result={result} />\n\n      {load && (\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\n      )}\n\n      <LoadMoreBtn\n        result={result}\n        page={page}\n        load={load}\n        handleLoadMore={handleLoadMore}\n      />\n    </div>\n  );\n};\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}