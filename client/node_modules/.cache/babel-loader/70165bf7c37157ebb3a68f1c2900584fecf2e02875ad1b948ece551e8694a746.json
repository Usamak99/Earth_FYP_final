{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import LikeButton from'../../LikeButton';import{useSelector,useDispatch}from\"react-redux\";import{likePost,savePost,unLikePost,unSavePost}from\"../../../redux/actions/postAction\";import ShareModal from'../../ShareModal';// import { BASE_URL } from '../../../utils/config';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardFooter=function CardFooter(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),saved=_useState4[0],setSaved=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadLike=_useState6[0],setLoadLike=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saveLoad=_useState8[0],setSaveLoad=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isShare=_useState10[0],setIsShare=_useState10[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme,socket=_useSelector.socket;useEffect(function(){if(post.likes.find(function(like){return like._id===auth.user._id;})){setIsLike(true);}else{setIsLike(false);}},[post.likes,auth.user._id]);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!loadLike){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoadLike(true);_context.next=5;return dispatch(likePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context.stop();}},_callee);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!loadLike){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadLike(true);_context2.next=5;return dispatch(unLikePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context2.stop();}},_callee2);}));return function handleUnLike(){return _ref3.apply(this,arguments);};}();var handleSavePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!saveLoad){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSaveLoad(true);_context3.next=5;return dispatch(savePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context3.stop();}},_callee3);}));return function handleSavePost(){return _ref4.apply(this,arguments);};}();var handleUnSavePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!saveLoad){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:setSaveLoad(true);_context4.next=5;return dispatch(unSavePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context4.stop();}},_callee4);}));return function handleUnSavePost(){return _ref5.apply(this,arguments);};}();useEffect(function(){if(auth.user.saved.find(function(id){return id===post._id;})){setSaved(true);}else{setSaved(false);}},[post._id,auth.user.saved]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card_footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_icon_menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(LikeButton,{isLike:isLike,handleLike:handleLike,handleUnLike:handleUnLike}),/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post._id),className:\"text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-comments\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-share\",alt:\"Send\",onClick:function onClick(){return setIsShare(!isShare);}})]}),saved?/*#__PURE__*/_jsx(\"i\",{className:\"fas text-info fa-bookmark\",onClick:handleUnSavePost}):/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\",onClick:handleSavePost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start\",children:[/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.likes.length,\" likes\"]}),/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.comments.length,\" comments\"]})]}),isShare&&/*#__PURE__*/_jsx(ShareModal// url={`${BASE_URL}/post/${post._id}`}\n,{url:\"http://google.com\",theme:theme,setIsShare:setIsShare})]});};export default CardFooter;","map":{"version":3,"names":["React","useState","useEffect","Link","LikeButton","useSelector","useDispatch","likePost","savePost","unLikePost","unSavePost","ShareModal","jsx","_jsx","jsxs","_jsxs","CardFooter","_ref","post","_useState","_useState2","_slicedToArray","isLike","setIsLike","_useState3","_useState4","saved","setSaved","_useState5","_useState6","loadLike","setLoadLike","_useState7","_useState8","saveLoad","setSaveLoad","_useState9","_useState10","isShare","setIsShare","dispatch","_useSelector","state","auth","theme","socket","likes","find","like","_id","user","handleLike","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","stop","apply","arguments","handleUnLike","_ref3","_callee2","_callee2$","_context2","handleSavePost","_ref4","_callee3","_callee3$","_context3","handleUnSavePost","_ref5","_callee4","_callee4$","_context4","id","className","children","to","concat","alt","onClick","style","padding","cursor","length","comments","url"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/home/post_card/CardFooter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from \"react-router-dom\";\nimport LikeButton from '../../LikeButton';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { likePost, savePost, unLikePost, unSavePost } from \"../../../redux/actions/postAction\";\nimport ShareModal from '../../ShareModal';\n// import { BASE_URL } from '../../../utils/config';\n\n\nconst CardFooter = ({post}) => {\n  const [isLike, setIsLike] = useState(false);\n  const [saved, setSaved] = useState(false);\n  const [loadLike, setLoadLike] = useState(false);\n  const [saveLoad, setSaveLoad] = useState(false);\n  const [isShare, setIsShare] = useState(false);\n\n  const dispatch = useDispatch();\n  const { auth, theme, socket } = useSelector((state) => state);\n\n  useEffect(() => {\n    if (post.likes.find((like) => like._id === auth.user._id)) {\n      setIsLike(true);\n    }else{\n      setIsLike(false);\n    }\n  }, [post.likes, auth.user._id]);\n\n  const handleLike = async () => {\n    if(loadLike) return;\n    setLoadLike(true);\n    await dispatch( likePost({post, auth, socket}) );\n    setLoadLike(false);\n  };\n\n  const handleUnLike = async () => {\n    if(loadLike) return;\n    setLoadLike(true);\n    await dispatch( unLikePost({post, auth, socket}) );\n    setLoadLike(false);\n  };\n\n    const handleSavePost = async () => {\n      if (saveLoad) return;\n      setSaveLoad(true);\n      await dispatch(savePost({ post, auth }));\n      setSaveLoad(false);\n    };\n\n    const handleUnSavePost = async () => {\n      if (saveLoad) return;\n      setSaveLoad(true);\n      await dispatch(unSavePost({ post, auth }));\n      setSaveLoad(false);\n    };\n\n    useEffect(() => {\n      if (auth.user.saved.find(id => id === post._id)) {\n        setSaved(true);\n      } else {\n        setSaved(false);\n      }\n    }, [post._id, auth.user.saved]);\n\n    return (\n      <div className=\"card_footer\">\n        <div className=\"card_icon_menu\">\n          <div className=\"d-flex\">\n            <LikeButton\n              isLike={isLike}\n              handleLike={handleLike}\n              handleUnLike={handleUnLike}\n            />\n            <Link to={`/post/${post._id}`} className=\"text-dark\">\n              <i className=\"far fa-comments\" />\n            </Link>\n            <i\n              className=\"fa fa-share\"\n              alt=\"Send\"\n              onClick={() => setIsShare(!isShare)}\n            />\n          </div>\n          {saved ? (\n            <i\n              className=\"fas text-info fa-bookmark\"\n              onClick={handleUnSavePost}\n            />\n          ) : (\n            <i\n              className=\"far fa-bookmark\"\n              onClick={handleSavePost}\n            />\n          )}\n        </div>\n        <div className=\"d-flex justify-content-start\">\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\n            {post.likes.length} likes\n          </h6>\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\n            {post.comments.length} comments\n          </h6>\n        </div>\n\n        {isShare && (\n          <ShareModal\n            // url={`${BASE_URL}/post/${post._id}`}\n            url=\"http://google.com\"\n            theme={theme}\n            setIsShare={setIsShare}\n          />\n        )}\n      </div>\n    );\n}\n\nexport default CardFooter\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}