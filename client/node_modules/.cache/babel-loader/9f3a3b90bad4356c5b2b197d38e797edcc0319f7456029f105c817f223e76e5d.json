{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{follow,unfollow}from\"../redux/actions/profileAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FollowBtn=function FollowBtn(_ref){var user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,profile=_useSelector.profile,socket=_useSelector.socket;var dispatch=useDispatch();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(auth.user.following.find(function(item){return item._id===user._id;})){setFollowed(true);}return function(){return setFollowed(false);};},[auth.user.following,user._id]);var handleFollow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!load){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setFollowed(true);setLoad(true);_context.next=6;return dispatch(follow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context.stop();}},_callee);}));return function handleFollow(){return _ref2.apply(this,arguments);};}();var handleUnFollow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!load){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setFollowed(false);setLoad(true);_context2.next=6;return dispatch(unfollow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function handleUnFollow(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleUnFollow,children:\"Unfollow\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleFollow,children:\"Follow\"})});};export default FollowBtn;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","follow","unfollow","jsx","_jsx","Fragment","_Fragment","FollowBtn","_ref","user","_useState","_useState2","_slicedToArray","followed","setFollowed","_useSelector","state","auth","profile","socket","dispatch","_useState3","_useState4","load","setLoad","following","find","item","_id","handleFollow","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","users","stop","apply","arguments","handleUnFollow","_ref3","_callee2","_callee2$","_context2","children","className","onClick"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/FollowBtn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { follow, unfollow } from \"../redux/actions/profileAction\";\n\nconst FollowBtn = ({user}) => {\n    const [ followed, setFollowed ] = useState(false);\n\n    const { auth, profile, socket } = useSelector(state => state);\n    const dispatch = useDispatch();\n\n    const [load, setLoad] = useState(false);\n\n    useEffect(() => {\n      if (auth.user.following.find((item) => item._id === user._id)) {\n        setFollowed(true);\n      }\n      return () => setFollowed(false);\n    }, [auth.user.following, user._id]);\n\n    const handleFollow = async () => {\n        if(load) return;\n\n        setFollowed(true);\n        setLoad(true);\n        await dispatch(follow({ users: profile.users, user, auth, socket }));\n        setLoad(false);\n    };\n\n    const handleUnFollow = async () => {\n      if (load) return;\n\n      setFollowed(false);\n      setLoad(true);\n      await dispatch(unfollow({ users: profile.users, user, auth, socket }));\n      setLoad(false);\n    };\n\n\n    return (\n      <>\n        {followed ? (\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleUnFollow}>\n            Unfollow\n          </button>\n        ) : (\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleFollow}>\n            Follow\n          </button>\n        )}\n      </>\n    );\n}\n\nexport default FollowBtn\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}