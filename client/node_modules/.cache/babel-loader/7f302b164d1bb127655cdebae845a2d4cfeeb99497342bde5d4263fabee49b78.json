{"ast":null,"code":"import{BrowserRouter as Router,Route}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import io from'socket.io-client';import PageRender from\"./customRouter/PageRender\";import PrivateRouter from\"./customRouter/PrivateRouter\";import Login from\"./pages/login\";import Register from\"./pages/register\";import Home from\"./pages/home\";import Alert from\"./components/alert/Alert\";import Header from\"./components/header/Header\";import StatusModal from\"./components/StatusModal\";import{refreshToken}from\"./redux/actions/authAction\";import{getPosts}from\"./redux/actions/postAction\";import{getSuggestions}from\"./redux/actions/suggestionsAction\";import{getNotifies}from\"./redux/actions/notifyAction\";import AdminDashboard from\"./pages/adminDashboard\";import{GLOBALTYPES}from\"./redux/actions/globalTypes\";import SocketClient from\"./SocketClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,status=_useSelector.status,modal=_useSelector.modal,userType=_useSelector.userType;var dispatch=useDispatch();useEffect(function(){dispatch(refreshToken());var socket=io();dispatch({type:GLOBALTYPES.SOCKET,payload:socket});return function(){return socket.close();};},[dispatch]);useEffect(function(){if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestions(auth.token));dispatch(getNotifies(auth.token));}},[dispatch,auth.token]);useEffect(function(){if(!(\"Notification\"in window)){alert(\"This browser does not support desktop notification\");}else if(Notification.permission===\"granted\"){}else if(Notification.permission!==\"denied\"){Notification.requestPermission().then(function(permission){if(permission===\"granted\"){}});}},[]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"theme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"App \".concat((status||modal)&&\"mode\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[userType===\"user\"&&auth.token&&/*#__PURE__*/_jsx(Header,{}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:userType===\"user\"?auth.token?Home:Login:auth.token?AdminDashboard:Login}),userType===\"user\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap_page\",children:[/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page\",component:PageRender}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page/:id\",component:PageRender})]})]})]})})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","useDispatch","useSelector","useEffect","io","PageRender","PrivateRouter","Login","Register","Home","Alert","Header","StatusModal","refreshToken","getPosts","getSuggestions","getNotifies","AdminDashboard","GLOBALTYPES","SocketClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useSelector","state","auth","status","modal","userType","dispatch","socket","type","SOCKET","payload","close","token","window","alert","Notification","permission","requestPermission","then","children","id","className","concat","exact","path","component"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport io from 'socket.io-client'\n\nimport PageRender from \"./customRouter/PageRender\";\nimport PrivateRouter from \"./customRouter/PrivateRouter\";\nimport Login from \"./pages/login\";\nimport Register from \"./pages/register\";\nimport Home from \"./pages/home\";\nimport Alert from \"./components/alert/Alert\";\nimport Header from \"./components/header/Header\";\nimport StatusModal from \"./components/StatusModal\";\nimport { refreshToken } from \"./redux/actions/authAction\";\nimport { getPosts } from \"./redux/actions/postAction\";\nimport { getSuggestions } from \"./redux/actions/suggestionsAction\";\nimport { getNotifies } from \"./redux/actions/notifyAction\";\n\nimport AdminDashboard from \"./pages/adminDashboard\";\nimport { GLOBALTYPES } from \"./redux/actions/globalTypes\";\nimport SocketClient from \"./SocketClient\";\n\nfunction App() {\n  const { auth, status, modal, userType } = useSelector((state) => state);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(refreshToken());\n\n    const socket = io();\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket })\n    return () => socket.close()\n  }, [dispatch]);\n\n\n  useEffect(() => {\n    if (auth.token) {\n      dispatch(getPosts(auth.token));\n      dispatch(getSuggestions(auth.token));\n      dispatch(getNotifies(auth.token));\n    }\n  }, [dispatch, auth.token]);\n\n  useEffect(() => {\n    if (!(\"Notification\" in window)) {\n      alert(\"This browser does not support desktop notification\");\n    } else if (Notification.permission === \"granted\") {\n\n    } else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(function (permission) {\n        if (permission === \"granted\") {\n        }\n      });\n    }\n  }, [])\n\n   \n\n  return (\n    <Router>\n      <Alert />\n      <input type=\"checkbox\" id=\"theme\" />\n      <div className={`App ${(status || modal) && \"mode\"}`}>\n        <div className=\"main\">\n          {userType === \"user\" && auth.token && <Header />}\n          {status && <StatusModal />}\n          {auth.token && <SocketClient /> }\n          <Route\n            exact\n            path=\"/\"\n            component={\n              userType === \"user\"\n                ? auth.token\n                  ? Home\n                  : Login\n                : auth.token\n                ? AdminDashboard\n                : Login\n            }\n          />\n\n          {userType === \"user\" && (\n            <>\n              <Route exact path=\"/register\" component={Register} />\n              <div className=\"wrap_page\">\n                <PrivateRouter exact path=\"/:page\" component={PageRender} />\n                <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}