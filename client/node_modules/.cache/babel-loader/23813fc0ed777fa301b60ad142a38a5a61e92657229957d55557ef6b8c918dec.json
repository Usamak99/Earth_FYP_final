{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";// import { Link } from \"react-router-dom\";\nimport UserCard from\"../UserCard\";import LoadIcon from\"../../images/loading.gif\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(search){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;setLoad(true);_context.next=7;return getDataAPI(\"search?username=\".concat(search),auth.token);case 7:res=_context.sent;setUsers(res.data.users);setLoad(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 15:case\"end\":return _context.stop();}},_callee,null,[[3,12]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){setSearch(\"\");setUsers([]);};return/*#__PURE__*/_jsxs(\"form\",{className:\"search_form\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",title:\"Enter to Search\",name:\"search\",value:search,id:\"search\",onChange:function onChange(e){return setSearch(e.target.value.toLowerCase().replace(/ /g,\" \"));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_icon\",style:{opacity:search?0:0.3},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Enter to Search\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:handleClose,className:\"close_search\",style:{opacity:users.length===0?0:1},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:\"none\"},children:\"Search\"}),load&&/*#__PURE__*/_jsx(\"img\",{className:\"loading\",src:LoadIcon,alt:\"Loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:search&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,border:\"border\",handleClose:handleClose},user._id);})})]});};export default Search;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","getDataAPI","GLOBALTYPES","UserCard","LoadIcon","jsx","_jsx","jsxs","_jsxs","Search","_useState","_useState2","_slicedToArray","search","setSearch","_useState3","_useState4","users","setUsers","_useSelector","state","auth","dispatch","_useState5","_useState6","load","setLoad","handleSearch","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","res","wrap","_callee$","_context","prev","next","preventDefault","abrupt","concat","token","sent","data","t0","type","ALERT","payload","error","response","msg","stop","_x","apply","arguments","handleClose","className","onSubmit","children","title","name","value","id","onChange","target","toLowerCase","replace","style","opacity","onClick","length","display","src","alt","map","user","border","_id"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/header/Search.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\n// import { Link } from \"react-router-dom\";\nimport UserCard from \"../UserCard\";\nimport LoadIcon from \"../../images/loading.gif\";\n\nconst Search = () => {\n  const [search, setSearch] = useState(\"\");\n  const [users, setUsers] = useState([]);\n\n  const { auth } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const [load, setLoad] = useState(false);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n\n    if (!search) return;\n\n    try {\n      setLoad(true);\n      const res = await getDataAPI(`search?username=${search}`, auth.token);\n      setUsers(res.data.users);\n      setLoad(false);\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: { error: err.response.data.msg },\n      });\n    }\n  };\n\n  const handleClose = () => {\n    setSearch(\"\");\n    setUsers([]);\n  };\n\n  return (\n    <form className=\"search_form\" onSubmit={handleSearch}>\n      <input\n        type=\"text\"\n        title=\"Enter to Search\"\n        name=\"search\"\n        value={search}\n        id=\"search\"\n        onChange={(e) =>\n          setSearch(e.target.value.toLowerCase().replace(/ /g, \" \"))\n        }\n      />\n      <div className=\"search_icon\" style={{ opacity: search ? 0 : 0.3 }}>\n        <span className=\"material-icons\">search</span>\n        <span>Enter to Search</span>\n      </div>\n\n      <div\n        onClick={handleClose}\n        className=\"close_search\"\n        style={{ opacity: users.length === 0 ? 0 : 1 }}\n      >\n        &times;\n      </div>\n\n      <button type=\"submit\" style={{ display: \"none\" }}>\n        Search\n      </button>\n\n      {load && <img className=\"loading\" src={LoadIcon} alt=\"Loading\" />}\n\n      <div className=\"users\">\n        {search &&\n          users.map((user) => (\n            <UserCard\n              key={user._id}\n              user={user}\n              border=\"border\"\n              handleClose={handleClose}\n            />\n          ))}\n      </div>\n    </form>\n  );\n};\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}