{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import PostThumb from\"../PostThumb\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Saved=function Saved(_ref){var auth=_ref.auth,dispatch=_ref.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savePosts=_useState2[0],setSavePosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){setLoad(true);getDataAPI(\"getSavePosts\",auth.token).then(function(res){setSavePosts(res.data.savePosts);setResult(res.data.result);setLoad(false);}).catch(function(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});});return function(){return setSavePosts([]);};},[dispatch,auth.token]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"getSavePosts?limit=\".concat(page*9),auth.token);case 3:res=_context.sent;setSavePosts(res.data.savePosts);setResult(res.data.result);setPage(page+1);setLoad(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:savePosts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Saved;","map":{"version":3,"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","GLOBALTYPES","jsx","_jsx","jsxs","_jsxs","Saved","_ref","auth","dispatch","_useState","_useState2","_slicedToArray","savePosts","setSavePosts","_useState3","_useState4","result","setResult","_useState5","_useState6","page","setPage","_useState7","_useState8","load","setLoad","token","then","res","data","catch","err","type","ALERT","payload","error","response","msg","handleLoadMore","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","concat","sent","stop","apply","arguments","children","posts","src","alt","className"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/components/profile/Saved.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PostThumb from \"../PostThumb\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\nimport LoadMoreBtn from \"../LoadMoreBtn\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\n\r\nconst Saved = ({ auth, dispatch }) => {\r\n  const [savePosts, setSavePosts] = useState([]);\r\n  const [result, setResult] = useState(9);\r\n  const [page, setPage] = useState(2);\r\n  const [load, setLoad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoad(true);\r\n    getDataAPI(`getSavePosts`, auth.token)\r\n    .then(res => { \r\n        setSavePosts(res.data.savePosts) \r\n        setResult(res.data.result)\r\n        setLoad(false)\r\n    })  \r\n    .catch(err => {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    })\r\n\r\n    return () => setSavePosts([]);\r\n  }, [dispatch, auth.token]);\r\n\r\n  const handleLoadMore = async () => {\r\n    setLoad(true);\r\n    const res = await getDataAPI(`getSavePosts?limit=${page * 9}`, auth.token);\r\n    setSavePosts(res.data.savePosts);\r\n    setResult(res.data.result);\r\n    setPage(page + 1);\r\n    setLoad(false);\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <PostThumb posts={savePosts} result={result} />\r\n\r\n      {load && (\r\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\r\n      )}\r\n\r\n      <LoadMoreBtn\r\n        result={result}\r\n        page={page}\r\n        load={load}\r\n        handleLoadMore={handleLoadMore}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Saved;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}