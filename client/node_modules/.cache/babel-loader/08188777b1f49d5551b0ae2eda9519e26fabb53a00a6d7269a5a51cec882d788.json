{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{GLOBALTYPES}from'./globalTypes';import{postDataAPI,deleteDataAPI,getDataAPI,patchDataAPI}from'../../utils/fetchData';export var NOTIFY_TYPES={GET_NOTIFIES:\"GET_NOTIFIES\",CREATE_NOTIFY:\"CREATE_NOTIFY\",REMOVE_NOTIFY:\"REMOVE_NOTIFY\",UPDATE_NOTIFY:\"UPDATE_NOTIFY\",UPDATE_SOUND:\"UPDATE_SOUND\",DELETE_ALL_NOTIFICATIONS:\"DELETE_ALL_NOTIFICATIONS\"};export var createNotify=function createNotify(_ref){var msg=_ref.msg,auth=_ref.auth,socket=_ref.socket;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postDataAPI(\"notify\",msg,auth.token);case 3:res=_context.sent;socket.emit('createNotify',_objectSpread(_objectSpread({},res.data.notify),{},{user:{username:auth.user.username,avatar:auth.user.avatar}}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var removeNotify=function removeNotify(_ref3){var msg=_ref3.msg,auth=_ref3.auth,socket=_ref3.socket;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return deleteDataAPI(\"notify/\".concat(msg.id,\"?url=\").concat(msg.url),auth.token);case 3:socket.emit(\"removeNotify\",msg);_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};export var getNotifies=function getNotifies(token){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getDataAPI('notifies',token);case 3:res=_context3.sent;dispatch({type:NOTIFY_TYPES.GET_NOTIFIES,payload:res.data.notifies});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var isReadNotify=function isReadNotify(_ref6){var msg=_ref6.msg,auth=_ref6.auth;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:dispatch({type:NOTIFY_TYPES.UPDATE_NOTIFY,payload:_objectSpread(_objectSpread({},msg),{},{isRead:true})});_context4.prev=1;_context4.next=4;return patchDataAPI(\"isReadNotify/\".concat(msg._id),null,auth.token);case 4:_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 9:case\"end\":return _context4.stop();}},_callee4,null,[[1,6]]);}));return function(_x4){return _ref7.apply(this,arguments);};}();};export var deleteAllNotifies=function deleteAllNotifies(token){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:dispatch({type:NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS,payload:[]});_context5.prev=1;_context5.next=4;return deleteDataAPI(\"deleteAllNotify\",token);case 4:_context5.next=9;break;case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context5.t0.response.data.msg}});case 9:case\"end\":return _context5.stop();}},_callee5,null,[[1,6]]);}));return function(_x5){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"names":["GLOBALTYPES","postDataAPI","deleteDataAPI","getDataAPI","patchDataAPI","NOTIFY_TYPES","GET_NOTIFIES","CREATE_NOTIFY","REMOVE_NOTIFY","UPDATE_NOTIFY","UPDATE_SOUND","DELETE_ALL_NOTIFICATIONS","createNotify","_ref","msg","auth","socket","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","res","wrap","_callee$","_context","prev","next","token","sent","emit","_objectSpread","data","notify","user","username","avatar","t0","type","ALERT","payload","error","response","stop","_x","apply","arguments","removeNotify","_ref3","_ref4","_callee2","_callee2$","_context2","concat","id","url","_x2","getNotifies","_ref5","_callee3","_callee3$","_context3","notifies","_x3","isReadNotify","_ref6","_ref7","_callee4","_callee4$","_context4","isRead","_id","_x4","deleteAllNotifies","_ref8","_callee5","_callee5$","_context5","_x5"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/redux/actions/notifyAction.js"],"sourcesContent":["import { GLOBALTYPES } from './globalTypes';\r\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData';\r\n\r\nexport const NOTIFY_TYPES = {\r\n  GET_NOTIFIES: \"GET_NOTIFIES\",\r\n  CREATE_NOTIFY: \"CREATE_NOTIFY\",\r\n  REMOVE_NOTIFY: \"REMOVE_NOTIFY\",\r\n  UPDATE_NOTIFY: \"UPDATE_NOTIFY\",\r\n  UPDATE_SOUND: \"UPDATE_SOUND\",\r\n  DELETE_ALL_NOTIFICATIONS: \"DELETE_ALL_NOTIFICATIONS\",\r\n};\r\n\r\nexport const createNotify = ({msg, auth, socket }) => async (dispatch) => {\r\n\r\n    try {\r\n        const res = await postDataAPI(`notify`, msg, auth.token);\r\n        socket.emit('createNotify', {\r\n          ...res.data.notify,\r\n          user: {\r\n            username: auth.user.username,\r\n            avatar: auth.user.avatar,\r\n          }\r\n        });\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n};\r\n\r\nexport const removeNotify = ({ msg, auth, socket }) => async (dispatch) => {\r\n  try {\r\n    await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token);\r\n    socket.emit(\"removeNotify\", msg);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getNotifies = (token) => async (dispatch) => {\r\n  try {\r\n    const res = await getDataAPI('notifies', token);\r\n    \r\n    dispatch({type: NOTIFY_TYPES.GET_NOTIFIES, payload: res.data.notifies});\r\n    \r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const isReadNotify = ({msg, auth}) => async (dispatch) => {\r\n\r\n  dispatch({type: NOTIFY_TYPES.UPDATE_NOTIFY, payload: {...msg, isRead: true} });\r\n\r\n  try {\r\n    await patchDataAPI(`isReadNotify/${msg._id}`,null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteAllNotifies = (token) => async (dispatch) => {\r\n  dispatch({ type: NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS, payload: [] });\r\n\r\n  try {\r\n    await deleteDataAPI(`deleteAllNotify`, token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}