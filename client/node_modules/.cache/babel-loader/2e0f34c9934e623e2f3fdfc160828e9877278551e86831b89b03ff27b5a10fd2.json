{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{getDiscoverPosts,DISCOVER_TYPES}from\"../redux/actions/discoverAction\";import LoadIcon from'../images/loading.gif';import PostThumb from\"../components/PostThumb\";import LoadMoreBtn from'../components/LoadMoreBtn';import{getDataAPI}from'../utils/fetchData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Discover=function Discover(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,discover=_useSelector.discover;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];useEffect(function(){if(!discover.firstLoad){dispatch(getDiscoverPosts(auth.token));}},[dispatch,auth.token,discover.firstLoad]);var handleLoadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"post_discover?num=\".concat(discover.page*8),auth.token);case 3:res=_context.sent;dispatch({type:DISCOVER_TYPES.UPDATE_POSTS,payload:res.data});setLoad(false);case 6:case\"end\":return _context.stop();}},_callee);}));return function handleLoadMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[discover.loading?/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto my-4\"}):/*#__PURE__*/_jsx(PostThumb,{posts:discover.posts,result:discover.result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),!discover.loading&&/*#__PURE__*/_jsx(LoadMoreBtn,{result:discover.result,page:discover.page,load:load,handleLoadMore:handleLoadMore})]});};export default Discover;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","getDiscoverPosts","DISCOVER_TYPES","LoadIcon","PostThumb","LoadMoreBtn","getDataAPI","jsx","_jsx","jsxs","_jsxs","Discover","_useSelector","state","auth","discover","dispatch","_useState","_useState2","_slicedToArray","load","setLoad","firstLoad","token","handleLoadMore","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","concat","page","sent","type","UPDATE_POSTS","payload","data","stop","apply","arguments","children","loading","src","alt","className","posts","result"],"sources":["C:/Users/a/Documents/New folder (3)/mern-social-media-master/client/src/pages/discover.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDiscoverPosts, DISCOVER_TYPES } from \"../redux/actions/discoverAction\";\nimport LoadIcon from '../images/loading.gif';\nimport PostThumb from \"../components/PostThumb\";\nimport LoadMoreBtn from '../components/LoadMoreBtn';\nimport { getDataAPI } from '../utils/fetchData';\n\nconst Discover = () => {\n    const { auth, discover } = useSelector(state => state);\n    const dispatch = useDispatch();\n\n    const [load, setLoad] = useState(false);\n\n    useEffect(() => {\n      if (!discover.firstLoad) {\n        dispatch(getDiscoverPosts(auth.token));\n      }\n    }, [dispatch, auth.token, discover.firstLoad]);\n\n    const handleLoadMore = async () => {\n        setLoad(true);\n        const res = await getDataAPI(`post_discover?num=${discover.page * 8}`, auth.token);\n        dispatch({ type: DISCOVER_TYPES.UPDATE_POSTS, payload: res.data });\n        setLoad(false);\n    };\n\n    return (\n      <div>\n        {discover.loading ? (\n          <img\n            src={LoadIcon}\n            alt=\"Loading...\"\n            className=\"d-block mx-auto my-4\"\n          />\n        ) : (\n            <PostThumb posts={discover.posts} result={discover.result} />\n          \n        )}\n\n        {load && (\n          <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\n        )}\n\n        {!discover.loading && (\n          <LoadMoreBtn\n            result={discover.result}\n            page={discover.page}\n            load={load}\n            handleLoadMore={handleLoadMore}\n          />\n        )}\n      </div>\n    );\n}\n\nexport default Discover;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}